var pivot;(()=>{"use strict";var e={};(()=>{var t=e;function r(e,t,n=(e=>e[t]),i){return r.make(e.map(n).filter(((e,t,r)=>r.indexOf(e)===t)).sort(i),t,n)}function n(e,t){return t.map((t=>e.filter(t.predicate)))}function i(e,t){return e.map((e=>e.map(t)))}function c(e){return e.length||null}function u(e){return t=>t.length?t.reduce(((t,r)=>t+e(r)),0):null}Object.defineProperty(t,"__esModule",{value:!0}),t.average=t.sum=t.count=t.query=t.compact=t.pivot=t.axis=void 0,t.axis=r,r.make=function(e,t,r=(e=>e[t])){return e.map((e=>({predicate:t=>r(t)===e,criteria:[{key:t,value:e}]})))},r.join=function(e,t){return t.reduce(((t,r)=>[...t,...e.map((e=>({predicate:t=>r.predicate(t)&&e.predicate(t),criteria:[...r.criteria,...e.criteria]})))]),[])},t.pivot=function(e,t,r){return n(e,t).map((e=>n(e,r)))},t.compact=function(e,t,r){const n=i(e,c);for(let r=n.length;r--;)n[r].some((e=>e))||(t.splice(r,1),e.splice(r,1));for(let t=n[0].length;t--;)n.some((e=>e[t]))||(r.splice(t,1),e.forEach((e=>e.splice(t,1))))},t.query=i,t.count=c,t.sum=u,t.average=function(e){return t=>t.length?u(e)(t)/c(t):null}})(),pivot=e})();